<!DOCTYPE html>
<html>
  <head>
    <title>Movie List</title>
    <script>
        function submitForm() {
          document.getElementById('dateForm').submit();
        }
      </script>
  </head>
  <body>
    <h1>Movie List</h1>
    
    <ul
        <% movies.forEach(movie => { %>
          <li>
            <a href="/schedules/<%= movie.movie_id %>"><%= movie.title %></a>
          </li>
        <% }) %>
    </ul>
    
    <form>
        <select>
          <% locations.forEach((location) => { %>
            <option><%= location.location %></option>
          <% }) %>
        </select>
    </form>

    <input type="date" id="selectedDate" name="selectedDate" min="<%= nextWeek.toISOString().split('T')[0] %>" onchange="submitForm()">


    <% if (schedules != null ) { %>
        <% if (schedules.length > 0) { %>

            <h3>Schedules:</h3>

            <ul>
              <% schedules.forEach(schedule => { %>
                <li><%= schedule.date %> at <%= schedule.hours %>.00</li>
              <% }) %>
            </ul>

          <% } else { %>
            <p>No schedules available for this movie.</p>
          <% } %>
     <% } %>

    </body>
  </html>
